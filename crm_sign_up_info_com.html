<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>트레이드잇 | CRM</title>
    <!-- bootstrap -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="/assets/css/tradeit.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/mypage.css">
    <!-- js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</head>
<!-- 기업 회원 -->
<body id="wrap-signup-info">
    <header>
        <div class="custom-hr"></div>
        <h3>기본정보를 <br> 입력해 주세요.</h3>
    </header>

    <main>
        <div class="input-box">
            <span>사업자번호</span><span class="bold main_color">*</span> 
            <div class="flex-center g-10">
                <input id="company-number" class="must" type="text" placeholder="사업자번호를 입력해주세요.">
                <button class="search-button">검색</button>
            </div>
            <div class="company-info-box">
                <div class="flex-center">
                    <label>회사명</label>
                    <value>트레이드잇</value>
                </div>
                <div class="flex-center">
                    <label>전화번호</label>
                    <value>051-123-4567</value>
                </div>
                <div class="flex-center">
                    <label>주소</label>
                    <value>부산 해운대구 센텀6로 21</value>
                </div>
            </div>
            <span>이메일</span><span class="bold main_color">*</span> 
            <div class="flex-center g-10">
                <div class="input-container">
                    <input id="email" class="must" type="text" placeholder="이메일을 입력해주세요.">
                    <div class="button-box">
                        <button type="button" class="reset"></button>
                    </div>
                </div>
                <button class="check-button">중복확인</button> 
                <button class="check-button done">확인완료</button>  
            </div>
            <span>비밀번호</span><span class="bold main_color">*</span> <br>
            <div class="input-container">
                <input id="password" class="must password" type="password" placeholder="영문, 숫자, 특수문자 조합 최소 8자">
                <div class="button-box">
                    <button type="button" class="password-nonview"></button>
                    <button type="button" class="reset"></button>
                </div>
            </div>
            <div class="flex-center g-15">
                <div class="pw-gide g-5">
                    <img src="./assets/imgs/pw-uncheck.svg">
                    <p>8자리 이상</p>
                </div>
                <div class="pw-gide flex-center g-5">
                    <img src="./assets/imgs/pw-uncheck.svg">
                    <p>숫자 포함</p>
                </div>
                <div class="pw-gide flex-center g-5">
                    <img src="./assets/imgs/pw-uncheck.svg">
                    <p>영문 포함</p>
                </div>
                <div class="pw-gide flex-center g-5">
                    <img src="./assets/imgs/pw-uncheck.svg">
                    <p>특수 문자 포함</p>
                </div>
            </div>
            <div class="input-container">
                <input id="password-check" class="must password" type="password" placeholder="비밀번호를 한번 더 입력해 주세요.">
                <div class="button-box">
                    <button type="button" class="password-nonview"></button>
                    <button type="button" class="reset"></button>
                </div>
            </div>
            <div class="pw-same flex-center g-5">
                <img src="./assets/imgs/pw-uncheck.svg">
                <p>비밀번호 일치</p>
            </div>
            <span>휴대폰</span><span class="bold main_color">*</span> 
            <div class="flex-center g-10">
                <div class="input-container">
                    <input id="tel" class="must" type="text" placeholder="휴대폰 번호를 인증해주세요.">
                    <div class="button-box">
                        <button type="button" class="reset"></button>
                    </div>
                </div>
                <button class="auth-button">인증</button> 
                <button class="auth-button done">인증완료</button>
            </div>
            <span>담당자 이름</span><span class="bold main_color">*</span> 
            <input type="text" class="must" placeholder="담당자 이름을 입력해주세요.">
            <div class="alert-txt">
                <p>담당자 이름이 올바르지 않습니다.</p>
            </div>
            <span>사이트 URL</span><span class="bold main_color">*</span> 
            <input type="text" class="must" placeholder="사이트 URL을 입력해주세요.">
            <span>키워드</span><span class="bold main_color">*</span> <br>
            <div class="input-container">
                <input class="keyword" type="text" placeholder="키워드 작성 후 엔터키를 입력해주세요.">
                <div class="keyword-button">
                    <button type="button" class="keyword-add"></button>
                </div>
            </div>
            <div class="flex-center g-5 keyword-container" style="display: none;">
                <!-- 동적으로 생성된 키워드 태그가 추가될 곳 -->
            </div>
        </div>
    </main>

    <footer>
        <div class="buttons-box">
            <button class="prev-button" onclick="window.location.href = 'crm_sign_up_agree_com.html';">  
                <span>이전</span>
            </button>
            <button class="next-button">
                <span>다음</span>
            </button>
        </div>
    </footer>

    <script>
        // input 숫자 외 문자 제거 
        $(document).ready(function() {
            $('#tel, #company-number').on('input', function() {
                $(this).val($(this).val().replace(/[^0-9]/g, ''));
            });
        });

        $(document).ready(function() {
            $('#company-number').on('input', function() {
                $('.search-button').css('background-color', $(this).val() !== '' ? '#0c77fb' : '');
            });

            $('#email').on('input', function() {
                $('.check-button').css('background-color', $(this).val() !== '' ? '#0c77fb' : '');
            });

            $('#tel').on('input', function() {
                $('.auth-button').css('background-color', $(this).val() !== '' ? '#0c77fb' : '');
            });

            function checkInputs() {
                let allFilled = true;
                $('.must').each(function() {
                    if ($(this).val() === '') {
                        allFilled = false;
                    }
                });

                $('.next-button').css('background-color', allFilled ? '#0c77fb' : '#ccc');
            }
            checkInputs();

            $('.must').on('input', checkInputs);
            $('.next-button').on('click', function(e) {
                let allFilled = true;

                $('.must').each(function() {
                    if ($(this).val() === '') {
                        allFilled = false;
                    }
                });

                if (!allFilled) {
                    e.preventDefault();
                    alert('필수 입력 항목이 입력되지 않았습니다.');
                } else {
                    window.location.href = 'crm_sign_up_info2_com.html';
                }
            });

                $('#password, #password-check').on('input', function() {
                    var $resetButton = $(this).siblings('.button-box').find('.reset');
                    $resetButton.toggle($(this).val().length > 0);
                });

                $('.reset').on('click', function() {
                    var $inputField = $(this).closest('.input-container').find('input');
                    $inputField.val('');
                    $(this).hide();
                });

                $('.password-nonview').on('click', function() {
                    var $passwordField = $(this).closest('.input-container').find('input');
                    var isPasswordVisible = $passwordField.attr('type') === 'text';
                    $passwordField.attr('type', isPasswordVisible ? 'password' : 'text');
                    $(this).css('background-image', isPasswordVisible
                        ? "url('https://tradeit.co.kr/assets/imgs/password-nonview.svg')"
                        : "url('https://tradeit.co.kr/assets/imgs/password-view.svg')");
                });
            });

            $(document).ready(function() {
            $('#password, #password-check').on('input', function() {
                $('.pw-gide').css('display', 'flex'); 
                if ($('#password-check').val() !== '') {
                    $('.pw-same').css('display', 'flex'); 
                }
            });

        // 비밀번호 조건 체크 함수
        function checkPassword() {
            var password = $('#password').val();
            var passwordCheck = $('#password-check').val();

            // 비밀번호 조건
            var isLengthValid = password.length >= 8;
            var hasNumber = /\d/.test(password);
            var hasLetter = /[a-zA-Z]/.test(password);
            var hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);

            // 각 조건에 따른 이미지 변경 및 active 클래스 추가
            updateGuide(isLengthValid, $('.pw-gide').eq(0));
            updateGuide(hasNumber, $('.pw-gide').eq(1));
            updateGuide(hasLetter, $('.pw-gide').eq(2));
            updateGuide(hasSpecialChar, $('.pw-gide').eq(3));

            // 비밀번호와 비밀번호 확인이 일치하는지 확인
            if (password === passwordCheck && password !== '') {
                $('.pw-same img').attr('src', './assets/imgs/pw-check.svg');
                $('.pw-same p').addClass('active');
            } else {
                $('.pw-same img').attr('src', './assets/imgs/pw-uncheck.svg');
                $('.pw-same p').removeClass('active');
            }
        }

        // 가이드 업데이트 함수
        function updateGuide(condition, element) {
            if (condition) {
                element.find('img').attr('src', './assets/imgs/pw-check.svg'); // img 변경
                element.find('p').addClass('active'); // active 클래스 추가
            } else {
                element.find('img').attr('src', './assets/imgs/pw-uncheck.svg'); // img 변경
                element.find('p').removeClass('active'); // active 클래스 제거
            }
        }

            // 이벤트 리스너 추가
            $('#password').on('input', checkPassword);
            $('#password-check').on('input', checkPassword);
        });

        // value check
        $(document).ready(function() {
        $('.search-button').on('click', function() {
            let businessNumber = $('#company-number').val();  
            if (businessNumber === '') {
                alert('사업자번호를 입력해주세요.');
            } else {
                $('.company-info-box').slideDown();  
            }
        });

        $('.check-button').on('click', function() {
            let email = $('#email').val();
            if (email === '') {
                alert('이메일을 입력해주세요.');
            } else {
                // 이메일 중복확인 
            }
        });

        $('.auth-button').on('click', function() {
            let tel = $('#tel').val();
            if (tel === '') {
                alert('휴대폰 번호를 입력해주세요.');
            } else {
                // 휴대폰 인증
            }
        });
    });

    // 키워드 추가 및 삭제
    $(document).ready(function () {
        // 키워드 추가 버튼 클릭 또는 Enter 키를 눌렀을 때 호출
        $('.keyword-add').on('click', function () {
            addKeywordTag();
        });

        // Enter 키를 눌렀을 때 호출
        $('.keyword').on('keypress', function (e) {
            if (e.which === 13) { 
                e.preventDefault(); 
                addKeywordTag();
            }
        });

        function addKeywordTag() {
            var keyword = $('.keyword').val().trim();

            if (keyword !== '') {
                var tag = `
                    <div class="keyword-tag g-5">
                        <div>${keyword}</div>
                        <img src="./assets/imgs/keyword-delete.svg" class="keyword-delete" alt="삭제">
                    </div>`;
                $('.keyword-container').append(tag).show();

                $('.keyword').val('');

                $('.keyword-delete').on('click', function () {
                    $(this).parent().remove();

                    if ($('.keyword-container').children().length === 0) {
                        $('.keyword-container').hide();
                    }
                });
            }
        }
    });
        
    </script>

</body>
</html>