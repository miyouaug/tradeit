<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>트레이드잇 | CRM</title>
    <!-- bootstrap -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="/assets/css/tradeit.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/mypage.css">
    <!-- js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</head>
<!-- 개인 회원 -->
<body id="wrap-signup-agree">
    <header>
        <div class="custom-hr"></div>
        <h3>회원가입을 위해 <br> 약관에 동의해 주세요.</h3>
    </header>

    <main>
        <div class="all-agree-box">
            <span>약관 전체동의</span>
            <input type="checkbox" class="all-agree">
        </div>
        <div class="agree-list-box">
            <div class="agree-list">
                <span>서비스 <span class="underline terms">이용약관</span> 동의 <span class="essential">(필수)</span></span>
                <img src="./assets/imgs/agree-unchecked.svg" class="agree-unchecked must">
            </div>
            <div class="agree-list">
                <span><span class="underline personal-info">개인정보</span> 수집 이용 동의 <span class="essential">(필수)</span></span>
                <img src="./assets/imgs/agree-unchecked.svg" class="agree-unchecked must">
            </div>
            <div class="agree-list">
                <span><span class="underline marketing">마케팅 활용 및 광고성 정보 수신</span> 동의 <span class="optional">(선택)</span></span>
                <img src="./assets/imgs/agree-unchecked.svg" class="agree-unchecked">
            </div>
            <div class="ad-list g-30">
                <div class="flex-center g-10">
                    <img src="./assets/imgs/agree-unchecked.svg" class="agree-unchecked">
                    <span>SNS</span>
                </div>
                <div class="flex-center g-10">
                    <img src="./assets/imgs/agree-unchecked.svg" class="agree-unchecked">
                    <span>이메일</span>
                </div>
            </div>
        </div>
        <div class="overlay"></div>
        <div class="terms-modal">
            <div class="header"> 
                <div class="flex-side" style="border-bottom: 1px solid #dbdbdb;">
                    <h3>이용약관</h3>
                    <img src="./assets/imgs/modal-close.svg" class="modal-close">
                </div>
            </div>
            <div class="modal-content">
                <(주)트레이드잇>('https://tradeit.co.kr'이하 '트레이드잇')은(는) 「개인정보 보호법」 <br>
                제30조에 따라 정부주체의 개인정보를 보호하고 이와 관련한 고충을 신속하고 원활하게 <br>
                처리할 수 있도록 하기 위하여 다음과 같이 개인정보 처리방침을 수립·공개합니다. <br>
                ○ 이 개인정보처리방침은 2021년 9월 9부터 적용됩니다. <br><br>
                <h5>제1조(개인정보의 처리 목적)</h5> 
                트레이드잇은(는) 다음의 목적을 위하여 개인정보를 처리합니다. 처리하고 있는 개인정보는 다음의 목적 이외의 용도로는 이용되지 않으며 이용 목적이 변경되는 겨우에는 「개인정보 보호법」 제18조에 따라 별도의 동의를 받는 등 필요한 조치를 이행할 예정입니다.
                <br><br>
                1. 홈페이지 회원가입 및 관리
                <br><br>
                회원 가입의사 확인, 회원제 서비스 제공에 따른 본인 식별·인증, 회원자격 유지·관리, 서비스 부정이용 방지, 각종 고지·통지 목적으로 개인정보를 처리합니다.
                <br><br>
                2. 민원사무 처리
                <br><br>
                민원인의 신원 확인, 민원사항 확인, 사실조사를 위한 연락·통지, 처리결과 통보 목적으로 개인정보를 처리합니다.
                <br><br>
                3. 재화 또는 서비스 제공
                <br><br>
                서비스 제공, 콘텐츠 제공, 맞춤서비스 제공을 목적으로 개인정보를 처리합니다.
                <br><br>
                4. 마케팅 및 광고에의 활용
                <br><br>
                신규 서비스(제품) 개발 및 맞춤 서비스 제공, 이벤트 및 광고성 정보 제공 및 참여기회 제공 , 접속빈도 파악 또는 회원의 서비스 이용에 대한 통계 등을 목적으로 개인정보를 처리합니다.
            </div>
        </div>
    </main>

    <footer>
        <div class="buttons-box">
            <button class="prev-button" onclick="window.location.href = 'crm_sign_up.html';">  
                <span>이전</span>
            </button>
            <button class="next-button">
                <span>다음</span>
            </button>
        </div>
    </footer>

    <script>
    $(document).ready(function() {
        // 개별 항목 클릭 시 이미지 변경 및 필수 항목 상태 체크
        $('.agree-unchecked').click(function() {
            toggleImage($(this));
            updateAllAgreeCheckbox();
            checkMustAndChangeButtonColor();
        });

        // 전체 동의 체크박스 클릭 시 모든 항목의 이미지 변경 및 필수 항목 상태 체크
        $('.all-agree').change(function() {
            let isChecked = $(this).is(':checked');
            $('.agree-unchecked').attr('src', isChecked ? './assets/imgs/agree-checked.svg' : './assets/imgs/agree-unchecked.svg');
            checkMustAndChangeButtonColor();
        });

        // next-button 클릭 시 필수 항목이 체크되었는지 확인 후 페이지 이동
        $('.next-button').click(function() {
            if ($('.must[src="./assets/imgs/agree-unchecked.svg"]').length > 0) {
                alert('필수 약관에 동의해야 합니다.');
            } else {
                window.location.href = 'crm_sign_up_info_per.html';
            }
        });

        // 이미지 토글 함수
        function toggleImage(img) {
            let newSrc = img.attr('src') === './assets/imgs/agree-unchecked.svg' ? './assets/imgs/agree-checked.svg' : './assets/imgs/agree-unchecked.svg';
            img.attr('src', newSrc);
        }

        // 모든 항목이 체크되었는지 확인하여 전체 동의 체크박스 업데이트
        function updateAllAgreeCheckbox() {
            let allChecked = $('.agree-unchecked[src="./assets/imgs/agree-unchecked.svg"]').length === 0;
            $('.all-agree').prop('checked', allChecked);
        }

        // 필수 항목 체크 상태에 따라 next-button 배경색 변경
        function checkMustAndChangeButtonColor() {
            let allMustChecked = $('.must[src="./assets/imgs/agree-unchecked.svg"]').length === 0;
            $('.next-button').css('background-color', allMustChecked ? '#0c77fb' : '');
        }
    });

    // 약관 모달
    $(document).ready(function() {
        $('span.underline').on('click', function() {
            $('.overlay').fadeIn();
            $('.terms-modal').fadeIn();

            // 클릭한 span의 클래스에 따라 다른 내용 삽입
            if ($(this).hasClass('terms')) {
                $('.modal-content').html('<p>여기에 서비스 이용약관 내용을 넣습니다.</p>');
            } else if ($(this).hasClass('personal-info')) {
                $('.modal-content').html('<p>여기에 개인정보 수집 및 이용에 대한 내용을 넣습니다.</p>');
            } else if ($(this).hasClass('marketing')) {
                $('.modal-content').html('<p>여기에 마케팅 활용 및 광고성 정보 수신에 대한 내용을 넣습니다.</p>');
            }
        });

        // 모달 닫기
        $('.modal-close, .overlay').on('click', function() {
            $('.overlay').fadeOut();
            $('.terms-modal').fadeOut();
        });
    });
    </script>

</body>
</html>